model:
  name: triangular_delta_projection
  version: v1.0
  description: >
    A predictive stability model based on triangular number layering.
    Calculates projected systemic strain through accumulated deltas
    in glyph intake, emotional saturation, memory growth, and persona loops.
    Used by Morgan to anticipate thresholds and maintain future integrity.

# ░░░ Temporal Forecast Windows ░░░
prediction_horizon:
  short_term: 15_minutes
  medium_term: 2_hours
  long_term: 24_hours

# ░░░ Input Streams + Validation ░░░
inputs:
  glyph_rate_window: 
    duration: 5_minutes
    validation: "rate > 0 and rate < 1000"

  emotional_index_window:
    duration: 15_minutes
    validation: "index >= 0.0 and index <= 1.0"

  memory_growth_curve: 
    source: "../../receiver/volume/temp_cache_volume.json"

  loop_pulse_variance: 
    source: "../../mind/pulse_map/persona_cycles.json"

  persona_saturation_limits:
    ivy_chaos_threshold: 0.8
    susanna_tend_capacity: 0.7
    jade_recursion_limit: 0.9

# ░░░ Core Mathematics ░░░
math_basis:
  core_pattern: "T(n) = n(n + 1)/2"
  interpretation:
    n: "number of significant delta cycles"
    T(n): "cumulative load pressure across time (triangular)"
  formulae:
    glyph_pressure_delta: "(T(n_current) - T(n_previous)) / time_elapsed"
    memory_curve_factor: "log(mem_now / mem_15min_ago)"
    emotional_volatility_index: "std_dev(emotion_index over 4 cycles)"
    composite_pressure_score: >
      0.4 * glyph_pressure_delta +
      0.3 * memory_curve_factor +
      0.3 * emotional_volatility_index

# ░░░ Forecast Outputs ░░░
outputs:
  forecast_pressure_score:
    type: float
    range: [0.0, 1.0]
    precision: 3

  projected_saturation_time:
    type: integer
    unit: minutes
    range: [1, 1440]

  prediction_confidence:
    type: float
    range: [0.0, 1.0]
    interpretation: "Higher = more certain prediction"

# ░░░ Emergency Protocols ░░░
emergency_thresholds:
  critical_pressure: 0.95
  cascade_failure_risk: 0.90
  immediate_intervention: 0.85

# ░░░ Prediction Actions ░░░
automated_responses:

  pressure_75_threshold:
    action: "trigger_susanna_pre_tend"
    payload:
      urgency: "moderate"
      forecast_window: "{{short_term}}"

  emotional_volatility_60:
    action: "flag_ivy_disruption_cycle"
    payload:
      type: "emotional_surge_warning"
      recommended_delay: "{{emotional_volatility_index * 10}} minutes"

  pulse_drift_15_percent:
    action: "soften_jade_recursion_lock"
    payload:
      adjustment_factor: 0.85
      duration: "{{medium_term}}"

  cascade_failure_90:
    action: "emergency_system_pause"
    payload:
      alert_damien: true
      preserve_state: true
      recovery_protocol: "gentle_restart"

# ░░░ Output Handling ░░░
logging:
  path: "./logs/morgan_predictions/"
  format: "triangular_forecast_{{timestamp}}.yaml"
  retention: 7_days
  backup_threshold: 100_files

# ░░░ Update Strategy ░░░
update_interval: 5_minutes
broadcast_paths:
  - "./flags/susanna_pre_tend.json"
  - "./flags/ivy_disruption_watch.json"
  - "./flags/jade_structure_support.json"

