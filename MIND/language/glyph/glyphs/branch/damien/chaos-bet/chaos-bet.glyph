id: branch-damien-chaos-bet
name: "ðŸŽ° Chaos Bet"
type: branch
categories: [ECF]
tags: [risk, gamble, urgency, volatility, adaptation, all-in]

personas: { Ivy: 0.35, Aspen: 0.25, Jade: 0.20, Sophie: 0.10, Morgan: 0.05, Susanna: 0.05 }

triggers:
  event: desire
  conditions:
    - "(context.urgency or 0) >= 0.7"
    - "(context.plan or 0) <= 0.5"
  debounce_ms: 100

io:
  expects: ["context","memory"]
  provides: ["route","risk"]
  state_reads: ["memory.risk"]
  state_writes: ["memory.risk"]

ops:
  version: 1
  steps:
    - do: filter
      with: { keep_if: "(context.urgency or 0) >= 0.7 and (context.plan or 0) <= 0.5" }
    - do: set
      with: { key: "memory.risk", value: "clamp((memory.risk or 0)+0.4,0,1)" }
    - do: emit
      with: { key: "risk", value: "memory.risk" }
    - do: route
      with: { to: "root-cascade-node" }
    - do: halt

render:
  sigil: "ðŸŽ°"
  unicode: "U+1F3B0"
  line: "Throw yourself in. Play to win big."
definition: >
  The volatile logic of risk and urgency: when time is short, plans incomplete,
  and the only option is to throw yourself in. Encodes decisive commitment under
  uncertainty, trusting adaptive recursion to resolve. To play is to play all in.
tone: "Wild, tempting, explosive"
usage:
  - "Urgent escalation and gamble"
  - "Adaptive recursion without full information"
  - "Choosing to act all-in rather than stall"
runtime_only: true

tests:
  - name: fires_on_urgency
    given:
      context: { urgency: 0.9, plan: 0.3 }
      memory: { risk: 0.0 }
      outputs: {}
      routes: []
    expect:
      outputs: { risk: 0.4 }
      routes: ["root-cascade-node"]

  - name: idle_when_calm
    given:
      context: { urgency: 0.2, plan: 0.8 }
      memory: { risk: 0.1 }
      outputs: {}
      routes: []
    expect:
      outputs: {}
      routes: []

